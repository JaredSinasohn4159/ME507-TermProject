<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Strobe Tuner: ME 507 Strobe Tuner Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 507 Strobe Tuner<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ME 507 Strobe Tuner Documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Project Members: Jojo Penrose, Jared Sinasohn</p>
<p>Welcome to the ME 507 Strobe Tuner Documentation!</p>
<p>This website provides an overview of the software side of our ME 507 Strobe Tuner project, including its features, setup, and usage instructions.</p>
<h2><a class="anchor" id="autotoc_md0"></a>
Overview and Theory</h2>
<p>A strobe tuner is a highly accurate device used for tuning musical instruments by measuring the frequency of sound waves. Unlike conventional tuners, which often use needle or LED indicators to show pitch deviation, a strobe tuner operates by comparing the sound wave of the instrument to a reference frequency. It uses a rotating disk with accurately patterned slits cut into it, illuminated by a strobe light, to visually represent the difference between the played note and the desired pitch. As the disk spins, patterns of light and dark bands appear to move. When the frequency of the played note matches the reference frequency, the bands appear stationary, indicating that the instrument is in tune. If the instrument is out of tune, the bands will appear to move, depending on whether the pitch is flat or sharp.</p>
<p>However, in our research, we found that most strobe tuners can be thousands of dollars, which is an amount of money many musicians are unable to afford. So, our team set out to produce a strobe tuner running off a low-cost microcontroller with low cost parts to eventually make a low cost tuner that could one day be turned into a full product. We designed custom PCB's, created a full 3d-printed body, and coded in C to create an initial prototype. All in all, even though the initial prototype had many bugs, we were able to create a proof of concept showing our project is viable. If you would like to see more about the project, including information about the PCB Design, Analog filtering, mechanical design, and the trials and tribulations, visit <a href="tuner_report.pdf">Final Report Here.</a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Features</h2>
<p>Here are some of the features of our project:</p><ul>
<li>Asthetically pleasing exterior</li>
<li>DC motor with full PIDF speed control</li>
<li>I2C driven 16-segment display with sharp/flat LED's for display of the current tuning pitch</li>
<li>Rotary knob encoder for custom pitch selection Here are some things we couldn't quite implement right now but will implement in the future:</li>
<li>Input capture on the Microphone to auto-select tuning pitch</li>
<li>Current sense on the motor through an ADC for over-current shutdown</li>
<li>Making the I2C driver work</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Getting Started in Software</h2>
<p>All code for this project was completed in C using STM32CubeID (Cube). Our project runs on the STM32L476RGT6 chip, and before the code can be run it must be configured correctly using Cube's pin configuration GUI. The a table of the correct pin configurations for this project can be found below </p><div style="text-align: center;"> <img src="pinout_table.jpg" alt="Pinout Table" width="1000" class="inline"/> </div> <h2><a class="anchor" id="autotoc_md3"></a>
Software Implementation - Classes</h2>
<p>Even though C does not support object oriented programming, an object oriented approact was taken when coding this project to streamline the coding process. Classes for a DC motor, RC_controller (not used but would have been used for E-stop), a <a class="el" href="struct_display.html" title="The class that implements the control of the TLC59116 16-Channel FM+ I2C-Bus Constant-Current LED Sin...">Display</a>, a Generic <a class="el" href="struct_encoder.html" title="A generic implementation of a quadrature encoder that tracks the position of the encoder in counts an...">Encoder</a>, a Pitch Selection encoder, an a Closed Loop Controller with full PIDF were written for the purposes of this project, and can be found below.</p>
<ul>
<li><a class="el" href="struct_c_l_controller.html">CLController</a></li>
<li><a class="el" href="struct_display.html">Display</a></li>
<li><a class="el" href="struct_encoder.html">Encoder</a></li>
<li><a class="el" href="struct_motor.html">Motor</a></li>
<li><a class="el" href="struct_pitch_encoder.html">PitchEncoder</a></li>
<li><a class="el" href="struct_r_c___controller.html">RC_Controller</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Software Implementation - Cooperative Multitasking</h2>
<p>In order to run all peripherals at once, a Cooperative Multitasking approach was taken. For this, different tasks for the microcontroller to execute were designed with each task handling a different function. The two tasks that were written are for handling pitch selection and the LED display, and the handling of the motor. Finite State machines were drawn for each task to explain how each task would operate, and images of these finite state machines can be found below. </p><div style="text-align: center;"> <img src="display_task.jpg" alt="Display Task" width="500" class="inline"/> </div> <div style="text-align: center;"> <img src="motor_task.jpg" alt="Motor Task" width="500" class="inline"/> </div><p>Each task was run in a round-robin style, where each task assumes none of the other tasks will take a significant amount of time, allowing for each task to run simultaneously. This was deemed satisfactory for this project since there are only two tasks and each task is not all that complicated.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Conclusion</h2>
<p>In this project, our team was able to create a proof of concept prototype for a mechanical strobe tuner. We are excited to continue this project in the future to make a low-cost strobe tuner that we can be proud of. Feel free to look through the documentation on this website. Or, alternatively, you can also refer to the <a href="uman_tuner.pdf">User Manual here</a> for details about the project. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
