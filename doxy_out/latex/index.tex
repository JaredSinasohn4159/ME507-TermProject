\chapter{ME 507 Strobe Tuner Documentation}
\hypertarget{index}{}\label{index}\index{ME 507 Strobe Tuner Documentation@{ME 507 Strobe Tuner Documentation}}
Project Members\+: Jojo Penrose, Jared Sinasohn

Welcome to the ME 507 Strobe Tuner Documentation!

This website provides an overview of the software side of our ME 507 Strobe Tuner project, including its features, setup, and usage instructions.\hypertarget{index_autotoc_md0}{}\doxysubsection{\texorpdfstring{Overview and Theory}{Overview and Theory}}\label{index_autotoc_md0}
A strobe tuner is a highly accurate device used for tuning musical instruments by measuring the frequency of sound waves. Unlike conventional tuners, which often use needle or LED indicators to show pitch deviation, a strobe tuner operates by comparing the sound wave of the instrument to a reference frequency. It uses a rotating disk with accurately patterned slits cut into it, illuminated by a strobe light, to visually represent the difference between the played note and the desired pitch. As the disk spins, patterns of light and dark bands appear to move. When the frequency of the played note matches the reference frequency, the bands appear stationary, indicating that the instrument is in tune. If the instrument is out of tune, the bands will appear to move, depending on whether the pitch is flat or sharp.

However, in our research, we found that most strobe tuners can be thousands of dollars, which is an amount of money many musicians are unable to afford. So, our team set out to produce a strobe tuner running off a low-\/cost microcontroller with low cost parts to eventually make a low cost tuner that could one day be turned into a full product. We designed custom PCB\textquotesingle{}s, created a full 3d-\/printed body, and coded in C to create an initial prototype. All in all, even though the initial prototype had many bugs, we were able to create a proof of concept showing our project is viable. If you would like to see more about the project, including information about the PCB Design, Analog filtering, mechanical design, and the trials and tribulations, visit \href{https://docs.google.com/document/d/1ZcnWdRxvwOcBsrmJdvSOL7kJm669_1bvG7WVEs5Oc88/edit?usp=sharing}{\texttt{ this link}} which will take you to a Google Doc report about the project.\hypertarget{index_autotoc_md1}{}\doxysubsection{\texorpdfstring{Features}{Features}}\label{index_autotoc_md1}
Here are some of the features of our project\+:
\begin{DoxyItemize}
\item Asthetically pleasing exterior
\item DC motor with full PIDF speed control
\item I2C driven 16-\/segment display with sharp/flat LED\textquotesingle{}s for display of the current tuning pitch
\item Rotary knob encoder for custom pitch selection Here are some things we couldn\textquotesingle{}t quite implement right now but will implement in the future\+:
\item Input capture on the Microphone to auto-\/select tuning pitch
\item Current sense on the motor through an ADC for over-\/current shutdown
\item Making the I2C driver work
\end{DoxyItemize}\hypertarget{index_autotoc_md2}{}\doxysubsection{\texorpdfstring{Getting Started in Software}{Getting Started in Software}}\label{index_autotoc_md2}
All code for this project was completed in C using STM32\+Cube\+ID (Cube). Our project runs on the STM32\+L476\+RGT6 chip, and before the code can be run it must be configured correctly using Cube\textquotesingle{}s pin configuration GUI. The a table of the correct pin configurations for this project can be found below    \hypertarget{index_autotoc_md3}{}\doxysubsection{\texorpdfstring{Software Implementation -\/ Classes}{Software Implementation -\/ Classes}}\label{index_autotoc_md3}
Even though C does not support object oriented programming, an object oriented approact was taken when coding this project to streamline the coding process. Classes for a DC motor, RC\+\_\+controller (not used but would have been used for E-\/stop), a \doxylink{struct_display}{Display}, a Generic \doxylink{struct_encoder}{Encoder}, a Pitch Selection encoder, an a Closed Loop Controller with full PIDF were written for the purposes of this project, and can be found below.


\begin{DoxyItemize}
\item \doxylink{struct_c_l_controller}{CLController}
\item \doxylink{struct_display}{Display}
\item \doxylink{struct_encoder}{Encoder}
\item \doxylink{struct_motor}{Motor}
\item \doxylink{struct_pitch_encoder}{Pitch\+Encoder}
\item \doxylink{struct_r_c___controller}{RC\+\_\+\+Controller}
\end{DoxyItemize}\hypertarget{index_autotoc_md4}{}\doxysubsection{\texorpdfstring{Software Implementation -\/ Cooperative Multitasking}{Software Implementation -\/ Cooperative Multitasking}}\label{index_autotoc_md4}
In order to run all peripherals at once, a Cooperative Multitasking approach was taken. For this, different tasks for the microcontroller to execute were designed with each task handling a different function. The two tasks that were written are for handling pitch selection and the LED display, and the handling of the motor. Finite State machines were drawn for each task to explain how each task would operate, and images of these finite state machines can be found below.      

Each task was run in a round-\/robin style, where each task assumes none of the other tasks will take a significant amount of time, allowing for each task to run simultaneously. This was deemed satisfactory for this project since there are only two tasks and each task is not all that complicated.\hypertarget{index_autotoc_md5}{}\doxysubsection{\texorpdfstring{Conclusion}{Conclusion}}\label{index_autotoc_md5}
In this project, our team was able to create a proof of concept prototype for a mechanical strobe tuner. We are excited to continue this project in the future to make a low-\/cost strobe tuner that we can be proud of. Feel free to look through the documentation on this website. Or, alternatively, you can also refer to the \href{uman_tuner.pdf}{\texttt{ User Manual here}} for details about the project. 