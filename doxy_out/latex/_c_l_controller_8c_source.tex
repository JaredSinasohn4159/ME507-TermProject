\doxysection{CLController.\+c}
\hypertarget{_c_l_controller_8c_source}{}\label{_c_l_controller_8c_source}\index{doxy\_core/Src/CLController.c@{doxy\_core/Src/CLController.c}}
\mbox{\hyperlink{_c_l_controller_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_c_l_controller_8h}{CLController.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00018}\mbox{\hyperlink{_c_l_controller_8h_a52ab2a8ea3461a6c03a8ae4bdc418e2a}{00018}}\ uint32\_t\ \mbox{\hyperlink{_c_l_controller_8c_a52ab2a8ea3461a6c03a8ae4bdc418e2a}{run}}(\mbox{\hyperlink{struct_c_l_controller}{CLController}}*\ con,\ \ int32\_t\ measured)\{}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00020}00020\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_aa23d09031b44d4b742c938bba2bd3d08}{curr}}\ =\ measured;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00022}00022\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a1df41bd38e38f416a1af4fd1531d3588}{curr\_time}}\ =\ HAL\_GetTick();}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00024}00024\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a599b89a0d8623fbc885502f9423e33f6}{err}}\ =\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4cbcc732c16f2b337c79aacb6abcd996}{setpoint}}\ -\/\ con-\/>\mbox{\hyperlink{struct_c_l_controller_aa23d09031b44d4b742c938bba2bd3d08}{curr}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00026}00026\ \ \ \ \ \textcolor{keywordflow}{if}(con-\/>\mbox{\hyperlink{struct_c_l_controller_a8fc5451919c881c9f365a23f80a7066f}{ki}}\ >\ 0)\{}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00027}00027\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_afbcda3b5dd10da7fad2b696d6e8ef13a}{err\_acc}}\ =\ con-\/>\mbox{\hyperlink{struct_c_l_controller_afbcda3b5dd10da7fad2b696d6e8ef13a}{err\_acc}}\ +\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a599b89a0d8623fbc885502f9423e33f6}{err}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00028}00028\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00030}00030\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4726d1cf116dac30e3e1ce17df384797}{eff}}\ =\ (con-\/>\mbox{\hyperlink{struct_c_l_controller_af6f6dd2aceffa3ad6e8efbb61754a355}{kf}}\ *\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4cbcc732c16f2b337c79aacb6abcd996}{setpoint}})/1000000\ +\ (con-\/>\mbox{\hyperlink{struct_c_l_controller_a2ea4cd350e19c81c4709080795260a78}{kp}}\ *\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a599b89a0d8623fbc885502f9423e33f6}{err}})/1000000\ +\ (con-\/>\mbox{\hyperlink{struct_c_l_controller_a8fc5451919c881c9f365a23f80a7066f}{ki}}\ *\ con-\/>\mbox{\hyperlink{struct_c_l_controller_afbcda3b5dd10da7fad2b696d6e8ef13a}{err\_acc}})/1000000;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00032}00032\ \ \ \ \ \textcolor{keywordflow}{if}(con-\/>\mbox{\hyperlink{struct_c_l_controller_a8d3d5860fec9eb2c248c19359d9f8fd6}{kd}}\ >\ 0)\{}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00033}00033\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_af1e57fe0d48cf1bebdd3fb6aef420924}{prev\_err\_list}}[con-\/>\mbox{\hyperlink{struct_c_l_controller_a8166a0deeed50c7001cfa018a276338f}{prev\_err\_index}}]\ =\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a599b89a0d8623fbc885502f9423e33f6}{err}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00034}00034\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8166a0deeed50c7001cfa018a276338f}{prev\_err\_index}}\ +=\ 1;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00035}00035\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{if}(con-\/>\mbox{\hyperlink{struct_c_l_controller_a8d3d5860fec9eb2c248c19359d9f8fd6}{kd}}\ >\ 0\ \&\&\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8166a0deeed50c7001cfa018a276338f}{prev\_err\_index}}\ >=\ con-\/>\mbox{\hyperlink{struct_c_l_controller_abfd85f5e9e777f11ce6c0732f7dac9ff}{prev\_err\_list\_length}})\{}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a605033f7cee9b2ab60378009befa6292}{slope}}\ =\ ((con-\/>\mbox{\hyperlink{struct_c_l_controller_af1e57fe0d48cf1bebdd3fb6aef420924}{prev\_err\_list}}[con-\/>\mbox{\hyperlink{struct_c_l_controller_a8166a0deeed50c7001cfa018a276338f}{prev\_err\_index}}-\/1]-\/con-\/>\mbox{\hyperlink{struct_c_l_controller_af1e57fe0d48cf1bebdd3fb6aef420924}{prev\_err\_list}}[0]))*1000/(con-\/>\mbox{\hyperlink{struct_c_l_controller_a1df41bd38e38f416a1af4fd1531d3588}{curr\_time}}\ -\/\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8f6fe8e7268551d335673047baf1bf56}{initial\_time}});}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4726d1cf116dac30e3e1ce17df384797}{eff}}\ +=\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8d3d5860fec9eb2c248c19359d9f8fd6}{kd}}\ *\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a605033f7cee9b2ab60378009befa6292}{slope}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8166a0deeed50c7001cfa018a276338f}{prev\_err\_index}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00041}00041\ \ \ \ \ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8f6fe8e7268551d335673047baf1bf56}{initial\_time}}\ =\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a1df41bd38e38f416a1af4fd1531d3588}{curr\_time}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00042}00042\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{return}\ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4726d1cf116dac30e3e1ce17df384797}{eff}};}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00044}00044\ \}}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00050}\mbox{\hyperlink{_c_l_controller_8h_a778c8284b941b1f1135208e8d748600d}{00050}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_c_l_controller_8c_a778c8284b941b1f1135208e8d748600d}{reset\_controller}}(\mbox{\hyperlink{struct_c_l_controller}{CLController}}*\ con)\{}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00051}00051\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a599b89a0d8623fbc885502f9423e33f6}{err}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00052}00052\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a4726d1cf116dac30e3e1ce17df384797}{eff}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00053}00053\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_afbcda3b5dd10da7fad2b696d6e8ef13a}{err\_acc}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00054}00054\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a605033f7cee9b2ab60378009befa6292}{slope}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00055}00055\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_aa23d09031b44d4b742c938bba2bd3d08}{curr}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00056}00056\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a8f6fe8e7268551d335673047baf1bf56}{initial\_time}}\ =\ HAL\_GetTick();}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00057}00057\ \ \ \ \ con-\/>\mbox{\hyperlink{struct_c_l_controller_a1df41bd38e38f416a1af4fd1531d3588}{curr\_time}}\ =\ HAL\_GetTick();}
\DoxyCodeLine{\Hypertarget{_c_l_controller_8c_source_l00058}00058\ \}}

\end{DoxyCode}
