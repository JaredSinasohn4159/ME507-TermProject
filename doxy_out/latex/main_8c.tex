\doxysection{doxy\+\_\+core/\+Src/main.c File Reference}
\hypertarget{main_8c}{}\label{main_8c}\index{doxy\_core/Src/main.c@{doxy\_core/Src/main.c}}


\+: Main program body  


{\ttfamily \#include "{}main.\+h"{}}\newline
{\ttfamily \#include "{}stm32l4xx\+\_\+hal.\+h"{}}\newline
{\ttfamily \#include "{}CLController.\+h"{}}\newline
{\ttfamily \#include "{}controller\+\_\+driver.\+h"{}}\newline
{\ttfamily \#include "{}display\+\_\+driver.\+h"{}}\newline
{\ttfamily \#include "{}encoder\+\_\+handler.\+h"{}}\newline
{\ttfamily \#include "{}motor\+\_\+driver.\+h"{}}\newline
{\ttfamily \#include "{}pitch\+\_\+encoder\+\_\+handler.\+h"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{main_8c_a70af21c671abfcc773614a9a4f63d920}{System\+Clock\+\_\+\+Config}} (void)
\begin{DoxyCompactList}\small\item\em System Clock Configuration. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8c_abb7ba6ad61b26b82c8823f0d59f04661}{display\+\_\+task}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}state)
\item 
void \mbox{\hyperlink{main_8c_ad73dd986713412cc86bf2976e60b38b0}{motor\+\_\+task}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}state)
\item 
int \mbox{\hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\begin{DoxyCompactList}\small\item\em The application entry point. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8c_a1730ffe1e560465665eb47d9264826f9}{Error\+\_\+\+Handler}} (void)
\begin{DoxyCompactList}\small\item\em This function is executed in case of error occurrence. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
ADC\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_a22b804736f5648d52f639b2647d4ed13}{hadc1}}
\item 
I2\+C\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_ac379bcc152d860f08b1279fd3e232295}{hi2c2}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_aac3d2c59ee0e3bbae1b99529a154eb62}{htim3}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_a85788cec5a97ee377e4ee2e74f026484}{htim4}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_acefaeaaa3856ddddae7083b2d220fe4b}{htim5}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_a1564492831a79fa18466467c3420c3c3}{htim6}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_a5faa27108379f799afb6984010bf0384}{htim8}}
\item 
UART\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{main_8c_aa9479c261d65eecedd3d9582f7f0f89c}{huart2}}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a2b6b64d3b55005be7af3d1132e10a479}{t1state}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a33f902a6185951cf5d6db65a0cfa665b}{t2state}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a7c51c532f0257102eae25859eaf242ba}{Buffer}} \mbox{[}50\mbox{]} = \{0\}
\begin{DoxyCompactList}\small\item\em These are buffers used for displaying stuff via uart during debugging. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a67adfb87a0824de9e91956eec6274f2f}{Pos\+\_\+\+Buffer}} \mbox{[}50\mbox{]} = \{0\}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a9aaf9d41d44dd349766ee6b2f6ae78c3}{Speed\+\_\+\+Buffer}} \mbox{[}50\mbox{]} = \{0\}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_acd189f2bf7809366910990b3517d9a50}{Space}} \mbox{[}$\,$\mbox{]} = "{} -\/ "{}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_adf974557b79464b096283b8cb4fd5155}{Start\+MSG}} \mbox{[}$\,$\mbox{]} = "{}Starting I2C Scanning\+: \textbackslash{}r\textbackslash{}n"{}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a51198e12cf75e1217673b12355eda967}{End\+MSG}} \mbox{[}$\,$\mbox{]} = "{}Done! \textbackslash{}r\textbackslash{}n\textbackslash{}r\textbackslash{}n"{}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_afc83abef129deb3147c298202865dd23}{led\+\_\+buff}}
\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_afaeaa1c0a1c5baa853bc09827f3d8328}{Eff\+\_\+\+Buffer}} \mbox{[}50\mbox{]} = \{0\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\+: Main program body 

!

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
Copyright (c) 2024 STMicroelectronics. All rights reserved.

This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-\/\+IS. 

Definition in file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{main_8c_abb7ba6ad61b26b82c8823f0d59f04661}\label{main_8c_abb7ba6ad61b26b82c8823f0d59f04661} 
\index{main.c@{main.c}!display\_task@{display\_task}}
\index{display\_task@{display\_task}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{display\_task()}{display\_task()}}
{\footnotesize\ttfamily void display\+\_\+task (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{state }\end{DoxyParamCaption})}

This function implements the \doxylink{struct_display}{Display} and Note task finite state machine. 
\begin{DoxyParams}{Parameters}
{\em state} & The pointer to the current state of the task \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{main_8c_source_l00233}{233}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{switch}(*state)\{}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ pe.\mbox{\hyperlink{struct_pitch_encoder_a4f4f9d7dc6695bed4a97c8cc643d26d3}{encoder}}-\/>\mbox{\hyperlink{struct_encoder_a30b15aedcc086ca7abb69f7ac012ce64}{timer}}-\/>Instance-\/>CNT\ =\ ((\mbox{\hyperlink{main_8c_acefaeaaa3856ddddae7083b2d220fe4b}{htim5}}.Init.Period)+1)/2;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ *state\ =\ 1;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ ptch\ =\ \mbox{\hyperlink{pitch__encoder__handler_8h_ae30c094e6767f017185358c645160595}{get\_pitch}}(\&pe);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{display__driver_8h_a1475cf65795074c2b448a950ecd6e1d6}{display\_note}}(\&display,ptch);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ \}}

\end{DoxyCode}
\Hypertarget{main_8c_a1730ffe1e560465665eb47d9264826f9}\label{main_8c_a1730ffe1e560465665eb47d9264826f9} 
\index{main.c@{main.c}!Error\_Handler@{Error\_Handler}}
\index{Error\_Handler@{Error\_Handler}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Error\_Handler()}{Error\_Handler()}}
{\footnotesize\ttfamily void Error\+\_\+\+Handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



This function is executed in case of error occurrence. 


\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{main_8c_source_l01054}{1054}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01055\ \{}
\DoxyCodeLine{01056\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ Error\_Handler\_Debug\ */}}
\DoxyCodeLine{01057\ \ \ \textcolor{comment}{/*\ User\ can\ add\ his\ own\ implementation\ to\ report\ the\ HAL\ error\ return\ state\ */}}
\DoxyCodeLine{01058\ \ \ \_\_disable\_irq();}
\DoxyCodeLine{01059\ \ \ \textcolor{keywordflow}{while}\ (1)}
\DoxyCodeLine{01060\ \ \ \{}
\DoxyCodeLine{01061\ \ \ \}}
\DoxyCodeLine{01062\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ Error\_Handler\_Debug\ */}}
\DoxyCodeLine{01063\ \}}

\end{DoxyCode}
\Hypertarget{main_8c_a840291bc02cba5474a4cb46a9b9566fe}\label{main_8c_a840291bc02cba5474a4cb46a9b9566fe} 
\index{main.c@{main.c}!main@{main}}
\index{main@{main}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



The application entry point. 


\begin{DoxyRetVals}{Return values}
{\em int} & \\
\hline
\end{DoxyRetVals}
initialize I2C

start the timers in their various modes.

set the display driver enable pin and the motor driver enable pin

This code was all used to debug the i2c driver to no avail, I have left it here for transparancy.

This is the game loop that runs forever to convert user inputed code into a PWM signal to drive the motors.

run the tasks in round-\/robin style.

Definition at line \mbox{\hyperlink{main_8c_source_l00273}{273}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00274\ \{}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ 1\ */}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ 1\ */}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \textcolor{comment}{/*\ MCU\ Configuration-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \textcolor{comment}{/*\ Reset\ of\ all\ peripherals,\ Initializes\ the\ Flash\ interface\ and\ the\ Systick.\ */}}
\DoxyCodeLine{00283\ \ \ HAL\_Init();}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ Init\ */}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ Init\ */}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{/*\ Configure\ the\ system\ clock\ */}}
\DoxyCodeLine{00290\ \ \ \mbox{\hyperlink{main_8c_a70af21c671abfcc773614a9a4f63d920}{SystemClock\_Config}}();}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ SysInit\ */}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ SysInit\ */}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \textcolor{comment}{/*\ Initialize\ all\ configured\ peripherals\ */}}
\DoxyCodeLine{00297\ \ \ MX\_GPIO\_Init();}
\DoxyCodeLine{00298\ \ \ MX\_USART2\_UART\_Init();}
\DoxyCodeLine{00299\ \ \ MX\_TIM1\_Init();}
\DoxyCodeLine{00300\ \ \ MX\_TIM3\_Init();}
\DoxyCodeLine{00301\ \ \ MX\_ADC1\_Init();}
\DoxyCodeLine{00302\ \ \ MX\_I2C2\_Init();}
\DoxyCodeLine{00303\ \ \ MX\_TIM4\_Init();}
\DoxyCodeLine{00304\ \ \ MX\_TIM5\_Init();}
\DoxyCodeLine{00305\ \ \ MX\_TIM8\_Init();}
\DoxyCodeLine{00306\ \ \ MX\_TIM6\_Init();}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ 2\ */}}
\DoxyCodeLine{00309\ \ \ MX\_I2C2\_Init();}
\DoxyCodeLine{00311\ \ \ HAL\_TIM\_Encoder\_Start(\&\mbox{\hyperlink{main_8c_a85788cec5a97ee377e4ee2e74f026484}{htim4}},\ TIM\_CHANNEL\_ALL);}
\DoxyCodeLine{00312\ \ \ HAL\_TIM\_Encoder\_Start\_IT(\&\mbox{\hyperlink{main_8c_acefaeaaa3856ddddae7083b2d220fe4b}{htim5}},\ TIM\_CHANNEL\_ALL);}
\DoxyCodeLine{00313\ \ \ HAL\_TIM\_PWM\_Start(\&\mbox{\hyperlink{main_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}},\ TIM\_CHANNEL\_1);}
\DoxyCodeLine{00314\ \ \ HAL\_TIM\_PWM\_Start(\&\mbox{\hyperlink{main_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}},\ TIM\_CHANNEL\_2);}
\DoxyCodeLine{00315\ \ \ HAL\_TIM\_Base\_Start(\&\mbox{\hyperlink{main_8c_a1564492831a79fa18466467c3420c3c3}{htim6}});}
\DoxyCodeLine{00317\ \ \ HAL\_GPIO\_WritePin(GPIOA,\ GPIO\_PIN\_10,GPIO\_PIN\_SET);}
\DoxyCodeLine{00318\ \ \ HAL\_GPIO\_WritePin(GPIOB,\ GPIO\_PIN\_2,GPIO\_PIN\_SET);}
\DoxyCodeLine{00320\ \ \ \textcolor{comment}{/*uint8\_t\ aTxBuffer[2]\ =\ \{\}; }}
\DoxyCodeLine{00321\ \textcolor{comment}{\ \ aTxBuffer[0]\ =\ 0x00; }}
\DoxyCodeLine{00322\ \textcolor{comment}{\ \ aTxBuffer[1]\ =\ 0x00; }}
\DoxyCodeLine{00323\ \textcolor{comment}{\ \ uint8\_t\ lvl\ =\ 85; }}
\DoxyCodeLine{00324\ \textcolor{comment}{\ \ uint8\_t\ addr\ =\ 0b11000000; }}
\DoxyCodeLine{00325\ \textcolor{comment}{\ \ HAL\_I2C\_Mem\_Read(\&hi2c2,\ addr,\ 0x00,\ 1,\ led\_buff,\ 1,\ 500); }}
\DoxyCodeLine{00326\ \textcolor{comment}{\ \ \ \ sprintf(Buffer,\ "{}Reg\ 0x14x:\ \%X\ \(\backslash\)r\(\backslash\)n"{},led\_buff); }}
\DoxyCodeLine{00327\ \textcolor{comment}{\ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00328\ \textcolor{comment}{\ \ HAL\_Delay(500); }}
\DoxyCodeLine{00329\ \textcolor{comment}{\ \ ret\ =\ HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x14,\ 1,\ lvl,\ 1,\ 500); }}
\DoxyCodeLine{00330\ \textcolor{comment}{\ \ /*HAL\_Delay(500); }}
\DoxyCodeLine{00331\ \textcolor{comment}{\ \ if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00332\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00333\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00334\ \textcolor{comment}{\ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00335\ \textcolor{comment}{\ \ \{ }}
\DoxyCodeLine{00336\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00337\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00338\ \textcolor{comment}{\ \ \} }}
\DoxyCodeLine{00339\ \textcolor{comment}{\ \ HAL\_Delay(500); }}
\DoxyCodeLine{00340\ \textcolor{comment}{\ \ ret\ =\ HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x15,\ 1,\ lvl,\ 1,\ 500); }}
\DoxyCodeLine{00341\ \textcolor{comment}{\ \ \ \ /*if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00342\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00343\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00344\ \textcolor{comment}{\ \ \ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00345\ \textcolor{comment}{\ \ \ \ \{ }}
\DoxyCodeLine{00346\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00347\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00348\ \textcolor{comment}{\ \ \ \ \} }}
\DoxyCodeLine{00349\ \textcolor{comment}{\ \ HAL\_Delay(500); }}
\DoxyCodeLine{00350\ \textcolor{comment}{\ \ ret\ =\ HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x16,\ 1,\ lvl,\ 1,\ 500); }}
\DoxyCodeLine{00351\ \textcolor{comment}{\ \ \ \ /*if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00352\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00353\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00354\ \textcolor{comment}{\ \ \ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00355\ \textcolor{comment}{\ \ \ \ \{ }}
\DoxyCodeLine{00356\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00357\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00358\ \textcolor{comment}{\ \ \ \ \} }}
\DoxyCodeLine{00359\ \textcolor{comment}{\ \ HAL\_Delay(500); }}
\DoxyCodeLine{00360\ \textcolor{comment}{\ \ ret\ =\ HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x17,\ 1,\ lvl,\ 1,\ 500); }}
\DoxyCodeLine{00361\ \textcolor{comment}{\ \ \ \ /*if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00362\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00363\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00364\ \textcolor{comment}{\ \ \ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00365\ \textcolor{comment}{\ \ \ \ \{ }}
\DoxyCodeLine{00366\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00367\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00368\ \textcolor{comment}{\ \ \ \ \} }}
\DoxyCodeLine{00369\ \textcolor{comment}{\ \ HAL\_I2C\_Mem\_Read(\&hi2c2,\ addr,\ 0x14,\ 1,\ (uint8\_t*)led\_buff,\ 1,\ 500); }}
\DoxyCodeLine{00370\ \textcolor{comment}{\ \ sprintf(Buffer,\ "{}Reg\ 0x14x:\ \%X\ \(\backslash\)r\(\backslash\)n"{},led\_buff); }}
\DoxyCodeLine{00371\ \textcolor{comment}{\ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00372\ \textcolor{comment}{\ \ HAL\_I2C\_Mem\_Read(\&hi2c2,\ addr,\ 0x15,\ 1,\ led\_buff,\ 1,\ 500); }}
\DoxyCodeLine{00373\ \textcolor{comment}{\ \ sprintf(Buffer,\ "{}Reg\ 0x15x:\ \%X\ \(\backslash\)r\(\backslash\)n"{},led\_buff); }}
\DoxyCodeLine{00374\ \textcolor{comment}{\ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00375\ \textcolor{comment}{\ \ HAL\_I2C\_Mem\_Read(\&hi2c2,\ addr,\ 0x16,\ 1,\ led\_buff,\ 1,\ 500); }}
\DoxyCodeLine{00376\ \textcolor{comment}{\ \ sprintf(Buffer,\ "{}Reg\ 0x16x:\ \%X\ \(\backslash\)r\(\backslash\)n"{},led\_buff); }}
\DoxyCodeLine{00377\ \textcolor{comment}{\ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00378\ \textcolor{comment}{\ \ HAL\_I2C\_Mem\_Read(\&hi2c2,\ addr,\ 0x17,\ 1,\ led\_buff,\ 1,\ 500); }}
\DoxyCodeLine{00379\ \textcolor{comment}{\ \ sprintf(Buffer,\ "{}Reg\ 0x17x:\ \%X\ \(\backslash\)r\(\backslash\)n"{},led\_buff); }}
\DoxyCodeLine{00380\ \textcolor{comment}{\ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00381\ \textcolor{comment}{\ \ /*if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00382\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00383\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00384\ \textcolor{comment}{\ \ \ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00385\ \textcolor{comment}{\ \ \ \ \{ }}
\DoxyCodeLine{00386\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00387\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00388\ \textcolor{comment}{\ \ \ \ \}*/}}
\DoxyCodeLine{00389\ \ \ \textcolor{comment}{//HAL\_Delay(500);}}
\DoxyCodeLine{00390\ \ \ \textcolor{comment}{//ret\ =\ HAL\_I2C\_Master\_Transmit(\&hi2c2,\ 0b11000001,\ ((uint8\_t*)1),1,100);}}
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{/*if(ret!=HAL\_OK)\{ }}
\DoxyCodeLine{00392\ \textcolor{comment}{\ \ \ \ \ \ sprintf(Buffer,\ "{}did\ not\ work\ :(\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00393\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00394\ \textcolor{comment}{\ \ \ \ \}else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00395\ \textcolor{comment}{\ \ \ \ \{ }}
\DoxyCodeLine{00396\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}worked!\(\backslash\)n\(\backslash\)r"{}); }}
\DoxyCodeLine{00397\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00398\ \textcolor{comment}{\ \ \ \ \} }}
\DoxyCodeLine{00399\ \textcolor{comment}{\ \ \ \ \ \ \ \ uint32\_t\ time1\ =\ HAL\_GetTick(); }}
\DoxyCodeLine{00400\ \textcolor{comment}{\ \ \ \ \ \ \ \ uint32\_t\ time2\ =\ HAL\_GetTick(); }}
\DoxyCodeLine{00401\ \textcolor{comment}{\ \ \ \ \ \ \ \ int32\_t\ sped\ =\ 0; }}
\DoxyCodeLine{00402\ \textcolor{comment}{\ \ \ \ \ \ \ \ //HAL\_I2C\_Master\_Transmit((\&hi2c2),\ 0b11000001,\ ((uint8\_t*)0b1101100001111000),2,100); }}
\DoxyCodeLine{00403\ \textcolor{comment}{\ \ \ \ \ \ \ \ uint8\_t\ prev\_count\ =\ 1; }}
\DoxyCodeLine{00404\ \textcolor{comment}{}}
\DoxyCodeLine{00405\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x02,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00406\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x03,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00407\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x04,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00408\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x05,\ 1,\ (uint8\_t*)0xFF,\ 1,\ 100); }}
\DoxyCodeLine{00409\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x06,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00410\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x07,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00411\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x08,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00412\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x09,\ 1,\ (uint8\_t*)0xFF,\ 1,\ 100); }}
\DoxyCodeLine{00413\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0A,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00414\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0B,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00415\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0C,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00416\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0D,\ 1,\ (uint8\_t*)0xFF,\ 1,\ 100); }}
\DoxyCodeLine{00417\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0E,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00418\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x0F,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00419\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x10,\ 1,\ (uint8\_t*)lvl,\ 1,\ 100); }}
\DoxyCodeLine{00420\ \textcolor{comment}{\ \ //HAL\_I2C\_Mem\_Write(\&hi2c2,\ 0b11000000,\ 0x11,\ 1,\ (uint8\_t*)0xFF,\ 1,\ 100); }}
\DoxyCodeLine{00421\ \textcolor{comment}{\ \ \ \ //\ The\ folloqing\ code\ was\ taken\ from\ here:\ https://deepbluembedded.com/stm32-\/i2c-\/scanner-\/hal-\/code-\/example/ }}
\DoxyCodeLine{00422\ \textcolor{comment}{\ \ uint8\_t\ TLC59116\_PWM0\_AUTOINCR\ =\ 0x82; }}
\DoxyCodeLine{00423\ \textcolor{comment}{\ \ HAL\_UART\_Transmit(\&huart2,\ StartMSG,\ sizeof(StartMSG),\ 10000); }}
\DoxyCodeLine{00424\ \textcolor{comment}{\ \ \ \ \ \ for(i=1;\ i<128;\ i++) }}
\DoxyCodeLine{00425\ \textcolor{comment}{\ \ \ \ \ \ \{ }}
\DoxyCodeLine{00426\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ ret\ =\ HAL\_I2C\_IsDeviceReady(\&hi2c2,\ (uint16\_t)(i<<1),\ 3,\ 5); }}
\DoxyCodeLine{00427\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ if\ (ret\ !=\ HAL\_OK) }}
\DoxyCodeLine{00428\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \{ }}
\DoxyCodeLine{00429\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Space,\ sizeof(Space),\ 10000); }}
\DoxyCodeLine{00430\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \} }}
\DoxyCodeLine{00431\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ else\ if(ret\ ==\ HAL\_OK) }}
\DoxyCodeLine{00432\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \{ }}
\DoxyCodeLine{00433\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ sprintf(Buffer,\ "{}0x\%X"{},\ i); }}
\DoxyCodeLine{00434\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ Buffer,\ sizeof(Buffer),\ 10000); }}
\DoxyCodeLine{00435\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \} }}
\DoxyCodeLine{00436\ \textcolor{comment}{\ \ \ \ \ \ \} }}
\DoxyCodeLine{00437\ \textcolor{comment}{\ \ \ \ \ \ HAL\_UART\_Transmit(\&huart2,\ EndMSG,\ sizeof(EndMSG),\ 10000); }}
\DoxyCodeLine{00438\ \textcolor{comment}{\ \ uint8\_t\ bruh[]\ =\ \{\ TLC59116\_PWM0\_AUTOINCR,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1\}; }}
\DoxyCodeLine{00439\ \textcolor{comment}{\ \ while(HAL\_I2C\_Master\_Transmit(\&hi2c2,\ 0xC0,\ *bruh,\ sizeof(bruh),\ 100)\ !=\ HAL\_OK) }}
\DoxyCodeLine{00440\ \textcolor{comment}{\ \ \ \ \ \ \{ }}
\DoxyCodeLine{00441\ \textcolor{comment}{\ \ \ \ \ \ HAL\_Delay(1); }}
\DoxyCodeLine{00442\ \textcolor{comment}{\ \ \ \ \ \ if\ (HAL\_I2C\_GetError(\&hi2c2)\ !=\ HAL\_I2C\_ERROR\_AF) }}
\DoxyCodeLine{00443\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \{ }}
\DoxyCodeLine{00444\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ Error\_Handler(); }}
\DoxyCodeLine{00445\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \} }}
\DoxyCodeLine{00446\ \textcolor{comment}{\ \ \ \ \ \ \}*/}}
\DoxyCodeLine{00447\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ 2\ */}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \textcolor{comment}{/*\ Infinite\ loop\ */}}
\DoxyCodeLine{00450\ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ WHILE\ */}}
\DoxyCodeLine{00452\ \ \ \textcolor{keywordflow}{while}\ (1)}
\DoxyCodeLine{00453\ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ \mbox{\hyperlink{main_8c_abb7ba6ad61b26b82c8823f0d59f04661}{display\_task}}(\&\mbox{\hyperlink{main_8c_a2b6b64d3b55005be7af3d1132e10a479}{t1state}});}
\DoxyCodeLine{00456\ \ \ \ \ \mbox{\hyperlink{main_8c_ad73dd986713412cc86bf2976e60b38b0}{motor\_task}}(\&\mbox{\hyperlink{main_8c_a33f902a6185951cf5d6db65a0cfa665b}{t2state}});}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ \ \ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ WHILE\ */}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{comment}{/*\ USER\ CODE\ BEGIN\ 3\ */}}
\DoxyCodeLine{00461\ \ \ \}}
\DoxyCodeLine{00462\ \ \ \textcolor{comment}{/*\ USER\ CODE\ END\ 3\ */}}
\DoxyCodeLine{00463\ \}}

\end{DoxyCode}
\Hypertarget{main_8c_ad73dd986713412cc86bf2976e60b38b0}\label{main_8c_ad73dd986713412cc86bf2976e60b38b0} 
\index{main.c@{main.c}!motor\_task@{motor\_task}}
\index{motor\_task@{motor\_task}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{motor\_task()}{motor\_task()}}
{\footnotesize\ttfamily void motor\+\_\+task (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{state }\end{DoxyParamCaption})}

This function implements the \doxylink{struct_motor}{Motor} task finite state machine. 
\begin{DoxyParams}{Parameters}
{\em state} & The pointer to the current state of the task \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{main_8c_source_l00250}{250}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{switch}(*state)\{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ *state\ =\ 1;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ timmy\ =\ HAL\_GetTick();}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(HAL\_GetTick()\ >=\ timmy\ +\ 2)\{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ timmy\ =\ HAL\_GetTick();}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_con.\mbox{\hyperlink{struct_c_l_controller_a4cbcc732c16f2b337c79aacb6abcd996}{setpoint}}\ =\ motor\_speeds[ptch];}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{encoder__handler_8h_a2e99e34a584541bdb75991748fcfe787}{encoder\_read\_curr\_state}}(\&mot\_enc);}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eff\ =\ \mbox{\hyperlink{_c_l_controller_8h_a52ab2a8ea3461a6c03a8ae4bdc418e2a}{run}}(\&m\_con,mot\_enc.\mbox{\hyperlink{struct_encoder_a36dda2666e5436e608a494230ca9076b}{speed}});}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{motor__driver_8h_a79432d503882140b2011c6fcd9005669}{motor\_set\_duty\_cycle}}(\&m,\ eff);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ \}}

\end{DoxyCode}
\Hypertarget{main_8c_a70af21c671abfcc773614a9a4f63d920}\label{main_8c_a70af21c671abfcc773614a9a4f63d920} 
\index{main.c@{main.c}!SystemClock\_Config@{SystemClock\_Config}}
\index{SystemClock\_Config@{SystemClock\_Config}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{SystemClock\_Config()}{SystemClock\_Config()}}
{\footnotesize\ttfamily void System\+Clock\+\_\+\+Config (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



System Clock Configuration. 


\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}
Configure the main internal regulator output voltage

Initializes the RCC Oscillators according to the specified parameters in the RCC\+\_\+\+Osc\+Init\+Type\+Def structure.

Initializes the CPU, AHB and APB buses clocks

Definition at line \mbox{\hyperlink{main_8c_source_l00469}{469}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00470\ \{}
\DoxyCodeLine{00471\ \ \ RCC\_OscInitTypeDef\ RCC\_OscInitStruct\ =\ \{0\};}
\DoxyCodeLine{00472\ \ \ RCC\_ClkInitTypeDef\ RCC\_ClkInitStruct\ =\ \{0\};}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \textcolor{keywordflow}{if}\ (HAL\_PWREx\_ControlVoltageScaling(PWR\_REGULATOR\_VOLTAGE\_SCALE1)\ !=\ HAL\_OK)}
\DoxyCodeLine{00477\ \ \ \{}
\DoxyCodeLine{00478\ \ \ \ \ \mbox{\hyperlink{main_8c_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{00479\ \ \ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ RCC\_OscInitStruct.OscillatorType\ =\ RCC\_OSCILLATORTYPE\_HSI;}
\DoxyCodeLine{00485\ \ \ RCC\_OscInitStruct.HSIState\ =\ RCC\_HSI\_ON;}
\DoxyCodeLine{00486\ \ \ RCC\_OscInitStruct.HSICalibrationValue\ =\ RCC\_HSICALIBRATION\_DEFAULT;}
\DoxyCodeLine{00487\ \ \ RCC\_OscInitStruct.PLL.PLLState\ =\ RCC\_PLL\_ON;}
\DoxyCodeLine{00488\ \ \ RCC\_OscInitStruct.PLL.PLLSource\ =\ RCC\_PLLSOURCE\_HSI;}
\DoxyCodeLine{00489\ \ \ RCC\_OscInitStruct.PLL.PLLM\ =\ 1;}
\DoxyCodeLine{00490\ \ \ RCC\_OscInitStruct.PLL.PLLN\ =\ 10;}
\DoxyCodeLine{00491\ \ \ RCC\_OscInitStruct.PLL.PLLP\ =\ RCC\_PLLP\_DIV7;}
\DoxyCodeLine{00492\ \ \ RCC\_OscInitStruct.PLL.PLLQ\ =\ RCC\_PLLQ\_DIV2;}
\DoxyCodeLine{00493\ \ \ RCC\_OscInitStruct.PLL.PLLR\ =\ RCC\_PLLR\_DIV2;}
\DoxyCodeLine{00494\ \ \ \textcolor{keywordflow}{if}\ (HAL\_RCC\_OscConfig(\&RCC\_OscInitStruct)\ !=\ HAL\_OK)}
\DoxyCodeLine{00495\ \ \ \{}
\DoxyCodeLine{00496\ \ \ \ \ \mbox{\hyperlink{main_8c_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{00497\ \ \ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ RCC\_ClkInitStruct.ClockType\ =\ RCC\_CLOCKTYPE\_HCLK|RCC\_CLOCKTYPE\_SYSCLK}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |RCC\_CLOCKTYPE\_PCLK1|RCC\_CLOCKTYPE\_PCLK2;}
\DoxyCodeLine{00503\ \ \ RCC\_ClkInitStruct.SYSCLKSource\ =\ RCC\_SYSCLKSOURCE\_PLLCLK;}
\DoxyCodeLine{00504\ \ \ RCC\_ClkInitStruct.AHBCLKDivider\ =\ RCC\_SYSCLK\_DIV1;}
\DoxyCodeLine{00505\ \ \ RCC\_ClkInitStruct.APB1CLKDivider\ =\ RCC\_HCLK\_DIV1;}
\DoxyCodeLine{00506\ \ \ RCC\_ClkInitStruct.APB2CLKDivider\ =\ RCC\_HCLK\_DIV1;}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \ \ \textcolor{keywordflow}{if}\ (HAL\_RCC\_ClockConfig(\&RCC\_ClkInitStruct,\ FLASH\_LATENCY\_4)\ !=\ HAL\_OK)}
\DoxyCodeLine{00509\ \ \ \{}
\DoxyCodeLine{00510\ \ \ \ \ \mbox{\hyperlink{main_8c_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{00511\ \ \ \}}
\DoxyCodeLine{00512\ \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\Hypertarget{main_8c_a7c51c532f0257102eae25859eaf242ba}\label{main_8c_a7c51c532f0257102eae25859eaf242ba} 
\index{main.c@{main.c}!Buffer@{Buffer}}
\index{Buffer@{Buffer}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Buffer}{Buffer}}
{\footnotesize\ttfamily uint8\+\_\+t Buffer\mbox{[}50\mbox{]} = \{0\}}



These are buffers used for displaying stuff via uart during debugging. 



Definition at line \mbox{\hyperlink{main_8c_source_l00176}{176}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00176\ \{0\};}

\end{DoxyCode}
\Hypertarget{main_8c_afaeaa1c0a1c5baa853bc09827f3d8328}\label{main_8c_afaeaa1c0a1c5baa853bc09827f3d8328} 
\index{main.c@{main.c}!Eff\_Buffer@{Eff\_Buffer}}
\index{Eff\_Buffer@{Eff\_Buffer}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Eff\_Buffer}{Eff\_Buffer}}
{\footnotesize\ttfamily uint8\+\_\+t Eff\+\_\+\+Buffer\mbox{[}50\mbox{]} = \{0\}}



Definition at line \mbox{\hyperlink{main_8c_source_l00183}{183}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00183\ \{0\};}

\end{DoxyCode}
\Hypertarget{main_8c_a51198e12cf75e1217673b12355eda967}\label{main_8c_a51198e12cf75e1217673b12355eda967} 
\index{main.c@{main.c}!EndMSG@{EndMSG}}
\index{EndMSG@{EndMSG}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{EndMSG}{EndMSG}}
{\footnotesize\ttfamily uint8\+\_\+t End\+MSG\mbox{[}$\,$\mbox{]} = "{}Done! \textbackslash{}r\textbackslash{}n\textbackslash{}r\textbackslash{}n"{}}



Definition at line \mbox{\hyperlink{main_8c_source_l00181}{181}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a22b804736f5648d52f639b2647d4ed13}\label{main_8c_a22b804736f5648d52f639b2647d4ed13} 
\index{main.c@{main.c}!hadc1@{hadc1}}
\index{hadc1@{hadc1}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{hadc1}{hadc1}}
{\footnotesize\ttfamily ADC\+\_\+\+Handle\+Type\+Def hadc1}



Definition at line \mbox{\hyperlink{main_8c_source_l00050}{50}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_ac379bcc152d860f08b1279fd3e232295}\label{main_8c_ac379bcc152d860f08b1279fd3e232295} 
\index{main.c@{main.c}!hi2c2@{hi2c2}}
\index{hi2c2@{hi2c2}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{hi2c2}{hi2c2}}
{\footnotesize\ttfamily I2\+C\+\_\+\+Handle\+Type\+Def hi2c2}



Definition at line \mbox{\hyperlink{main_8c_source_l00052}{52}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a25fc663547539bc49fecc0011bd76ab5}\label{main_8c_a25fc663547539bc49fecc0011bd76ab5} 
\index{main.c@{main.c}!htim1@{htim1}}
\index{htim1@{htim1}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim1}{htim1}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim1}



Definition at line \mbox{\hyperlink{main_8c_source_l00054}{54}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_aac3d2c59ee0e3bbae1b99529a154eb62}\label{main_8c_aac3d2c59ee0e3bbae1b99529a154eb62} 
\index{main.c@{main.c}!htim3@{htim3}}
\index{htim3@{htim3}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim3}{htim3}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim3}



Definition at line \mbox{\hyperlink{main_8c_source_l00055}{55}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a85788cec5a97ee377e4ee2e74f026484}\label{main_8c_a85788cec5a97ee377e4ee2e74f026484} 
\index{main.c@{main.c}!htim4@{htim4}}
\index{htim4@{htim4}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim4}{htim4}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim4}



Definition at line \mbox{\hyperlink{main_8c_source_l00056}{56}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_acefaeaaa3856ddddae7083b2d220fe4b}\label{main_8c_acefaeaaa3856ddddae7083b2d220fe4b} 
\index{main.c@{main.c}!htim5@{htim5}}
\index{htim5@{htim5}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim5}{htim5}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim5}



Definition at line \mbox{\hyperlink{main_8c_source_l00057}{57}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a1564492831a79fa18466467c3420c3c3}\label{main_8c_a1564492831a79fa18466467c3420c3c3} 
\index{main.c@{main.c}!htim6@{htim6}}
\index{htim6@{htim6}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim6}{htim6}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim6}



Definition at line \mbox{\hyperlink{main_8c_source_l00058}{58}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a5faa27108379f799afb6984010bf0384}\label{main_8c_a5faa27108379f799afb6984010bf0384} 
\index{main.c@{main.c}!htim8@{htim8}}
\index{htim8@{htim8}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{htim8}{htim8}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def htim8}



Definition at line \mbox{\hyperlink{main_8c_source_l00059}{59}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_aa9479c261d65eecedd3d9582f7f0f89c}\label{main_8c_aa9479c261d65eecedd3d9582f7f0f89c} 
\index{main.c@{main.c}!huart2@{huart2}}
\index{huart2@{huart2}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{huart2}{huart2}}
{\footnotesize\ttfamily UART\+\_\+\+Handle\+Type\+Def huart2}



Definition at line \mbox{\hyperlink{main_8c_source_l00061}{61}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_afc83abef129deb3147c298202865dd23}\label{main_8c_afc83abef129deb3147c298202865dd23} 
\index{main.c@{main.c}!led\_buff@{led\_buff}}
\index{led\_buff@{led\_buff}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{led\_buff}{led\_buff}}
{\footnotesize\ttfamily uint8\+\_\+t led\+\_\+buff}



Definition at line \mbox{\hyperlink{main_8c_source_l00182}{182}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a67adfb87a0824de9e91956eec6274f2f}\label{main_8c_a67adfb87a0824de9e91956eec6274f2f} 
\index{main.c@{main.c}!Pos\_Buffer@{Pos\_Buffer}}
\index{Pos\_Buffer@{Pos\_Buffer}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Pos\_Buffer}{Pos\_Buffer}}
{\footnotesize\ttfamily uint8\+\_\+t Pos\+\_\+\+Buffer\mbox{[}50\mbox{]} = \{0\}}



Definition at line \mbox{\hyperlink{main_8c_source_l00177}{177}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00177\ \{0\};}

\end{DoxyCode}
\Hypertarget{main_8c_acd189f2bf7809366910990b3517d9a50}\label{main_8c_acd189f2bf7809366910990b3517d9a50} 
\index{main.c@{main.c}!Space@{Space}}
\index{Space@{Space}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Space}{Space}}
{\footnotesize\ttfamily uint8\+\_\+t Space\mbox{[}$\,$\mbox{]} = "{} -\/ "{}}



Definition at line \mbox{\hyperlink{main_8c_source_l00179}{179}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a9aaf9d41d44dd349766ee6b2f6ae78c3}\label{main_8c_a9aaf9d41d44dd349766ee6b2f6ae78c3} 
\index{main.c@{main.c}!Speed\_Buffer@{Speed\_Buffer}}
\index{Speed\_Buffer@{Speed\_Buffer}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Speed\_Buffer}{Speed\_Buffer}}
{\footnotesize\ttfamily uint8\+\_\+t Speed\+\_\+\+Buffer\mbox{[}50\mbox{]} = \{0\}}



Definition at line \mbox{\hyperlink{main_8c_source_l00178}{178}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00178\ \{0\};}

\end{DoxyCode}
\Hypertarget{main_8c_adf974557b79464b096283b8cb4fd5155}\label{main_8c_adf974557b79464b096283b8cb4fd5155} 
\index{main.c@{main.c}!StartMSG@{StartMSG}}
\index{StartMSG@{StartMSG}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{StartMSG}{StartMSG}}
{\footnotesize\ttfamily uint8\+\_\+t Start\+MSG\mbox{[}$\,$\mbox{]} = "{}Starting I2C Scanning\+: \textbackslash{}r\textbackslash{}n"{}}



Definition at line \mbox{\hyperlink{main_8c_source_l00180}{180}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a2b6b64d3b55005be7af3d1132e10a479}\label{main_8c_a2b6b64d3b55005be7af3d1132e10a479} 
\index{main.c@{main.c}!t1state@{t1state}}
\index{t1state@{t1state}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{t1state}{t1state}}
{\footnotesize\ttfamily t1state = 0}

The current state of the \doxylink{struct_display}{Display} and note task 

Definition at line \mbox{\hyperlink{main_8c_source_l00167}{167}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

\Hypertarget{main_8c_a33f902a6185951cf5d6db65a0cfa665b}\label{main_8c_a33f902a6185951cf5d6db65a0cfa665b} 
\index{main.c@{main.c}!t2state@{t2state}}
\index{t2state@{t2state}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{t2state}{t2state}}
{\footnotesize\ttfamily t2state = 0}

The current state of the motor task 

Definition at line \mbox{\hyperlink{main_8c_source_l00173}{173}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.

